[custom]

; ===== SCRM：放最前，原生规则（rules=），确保优先且生效 =====
; 端口优先拦截（STUN 3478）
rules=DST-PORT,3478,📋 SCRM

; 进程命中（macOS）
rules=PROCESS-NAME,SCRM Champion,📋 SCRM
rules=PROCESS-NAME,SCRM Champion Helper,📋 SCRM

; 域名精确/后缀/关键词兜底
rules=DOMAIN,stun.miwifi.com,📋 SCRM
rules=DOMAIN,oss.scrmchampion.com,📋 SCRM
rules=DOMAIN,api.scrmchampion.com,📋 SCRM
rules=DOMAIN,api.ip.sb,📋 SCRM
rules=DOMAIN,freeipapi.com,📋 SCRM
rules=DOMAIN,ip-scan.browserscan.net,📋 SCRM
rules=DOMAIN,ipcheck.im,📋 SCRM
; 注意：删掉你之前的 198.18.0.0/15（fake-ip 本地段），它不会命中外部目标

; ===== 下面保持你的原有 rule-sets（不动顺序）=====
ruleset=🎯 Direct,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Lan/Lan.yaml
ruleset=🎯 Direct,clash-classic:https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaDomain.list
ruleset=🎯 Direct,clash-classic:https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/GoogleCN.list
ruleset=🎯 Direct,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Apple/AppleCN.yaml
ruleset=🎯 Direct,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Microsoft/MicrosoftCN.yaml
ruleset=🎯 Direct,[]GEOIP,CN

ruleset=🎵 TikTok,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/TikTok/TikTok.yaml
ruleset=🎥 Netflix,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Netflix/Netflix.yaml
ruleset=🤖 OpenAI,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OpenAI/OpenAI.yaml
ruleset=🧠 AI,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/AI/AI.yaml
ruleset=🎮 Game,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Game/Game.yaml
ruleset=🐟 Final,[]FINAL

; ===== Proxy Groups 保持不变（确保 📋 SCRM 分组选到“支持 UDP”的节点）=====
custom_proxy_group=🚀 Proxy`select`[]🇭🇰 HK`[]🇹🇼 TW`[]🇯🇵 JP`[]🇸🇬 SG`[]🇺🇸 US`(?i)^(?!.*(流量|剩余|到期|到期时间|重置|公告|提示|套餐|试用|测速|Expire|Traffic|Bandwidth|Plan|Reset)).*
custom_proxy_group=🇭🇰 HK`select`(港|HK|Hong Kong)
custom_proxy_group=🇹🇼 TW`select`(台|新北|彰化|TW|Taiwan)
custom_proxy_group=🇯🇵 JP`select`(日|JP|Japan|东京|大阪)
custom_proxy_group=🇸🇬 SG`select`(新|坡|狮城|SG|Singapore)
custom_proxy_group=🇺🇸 US`select`(美|US|United States|洛杉矶|芝加哥|硅谷|达拉斯|西雅图|纽约)

custom_proxy_group=🎯 Direct`select`[]DIRECT
custom_proxy_group=📋 SCRM`select`[]🇯🇵 JP`[]🚀 Proxy`[]🇭🇰 HK`[]🇹🇼 TW`[]🇸🇬 SG`[]🇺🇸 US`[]DIRECT
custom_proxy_group=🎵 TikTok`select`[]🚀 Proxy`[]🇭🇰 HK`[]🇹🇼 TW`[]🇯🇵 JP`[]🇸🇬 SG`[]🇺🇸 US`[]DIRECT
custom_proxy_group=🎥 Netflix`select`[]🚀 Proxy`[]🇭🇰 HK`[]🇹🇼 TW`[]🇯🇵 JP`[]🇸🇬 SG`[]🇺🇸 US`[]DIRECT
custom_proxy_group=🤖 OpenAI`select`[]🚀 Proxy`[]🇭🇰 HK`[]🇹🇼 TW`[]🇯🇵 JP`[]🇸🇬 SG`[]🇺🇸 US`[]DIRECT
custom_proxy_group=🧠 AI`select`[]🚀 Proxy`[]🇭🇰 HK`[]🇹🇼 TW`[]🇯🇵 JP`[]🇸🇬 SG`[]🇺🇸 US`[]DIRECT
custom_proxy_group=🎮 Game`select`[]DIRECT`[]🚀 Proxy`[]🇭🇰 HK`[]🇹🇼 TW`[]🇯🇵 JP`[]🇸🇬 SG`[]🇺🇸 US
custom_proxy_group=🐟 Final`select`[]🚀 Proxy`[]🇭🇰 HK`[]🇹🇼 TW`[]🇯🇵 JP`[]🇸🇬 SG`[]🇺🇸 US`[]DIRECT

enable_rule_generator=true
overwrite_original_rules=true
